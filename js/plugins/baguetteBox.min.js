!function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.baguetteBox=t()}(this,function(){"use strict";function S(e,t){o.transforms=W(),o.svg=G(),L(),H(e),M(e,t)}function M(e,t){var n=document.querySelectorAll(e),i={galleries:[],nodeList:n};p[e]=i,[].forEach.call(n,function(e){t&&t.filter&&(h=t.filter);var n=e.getElementsByTagName("a");n=[].filter.call(n,function(e){return h.test(e.href)});var a=[];0!==n.length&&(i.galleries.push(a),[].forEach.call(n,function(e,n){var i=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,q(a,t),I(n)},o={eventHandler:i,imageElement:e};Z(e,"click",i),a.push(o)}))})}function A(){for(var e in p)p.hasOwnProperty(e)&&H(e)}function H(e){if(p.hasOwnProperty(e)){var t=p[e].galleries;[].forEach.call(t,function(e){[].forEach.call(e,function(e){$(e.imageElement,"click",e.eventHandler)}),f===e&&(f=[])}),delete p[e]}}function L(){return(r=ee("baguetteBox-overlay"))?(l=ee("baguetteBox-slider"),u=ee("previous-button"),s=ee("next-button"),void(c=ee("close-button"))):(r=te("div"),r.setAttribute("role","dialog"),r.id="baguetteBox-overlay",document.getElementsByTagName("body")[0].appendChild(r),l=te("div"),l.id="baguetteBox-slider",r.appendChild(l),u=te("button"),u.setAttribute("type","button"),u.id="previous-button",u.setAttribute("aria-label","Previous"),u.innerHTML=o.svg?e:"&lt;",r.appendChild(u),s=te("button"),s.setAttribute("type","button"),s.id="next-button",s.setAttribute("aria-label","Next"),s.innerHTML=o.svg?t:"&gt;",r.appendChild(s),c=te("button"),c.setAttribute("type","button"),c.id="close-button",c.setAttribute("aria-label","Close"),c.innerHTML=o.svg?n:"&times",r.appendChild(c),u.className=s.className=c.className="baguetteBox-button",void P())}function F(e){switch(e.keyCode){case 37:V();break;case 39:_();break;case 27:z()}}function P(){Z(r,"click",w),Z(u,"click",k),Z(s,"click",T),Z(c,"click",x),Z(r,"touchstart",C),Z(r,"touchmove",E),Z(r,"touchend",B),Z(document,"focus",N,!0)}function O(){$(r,"click",w),$(u,"click",k),$(s,"click",T),$(c,"click",x),$(r,"touchstart",C),$(r,"touchmove",E),$(r,"touchend",B),$(document,"focus",N,!0)}function q(e,t){if(f!==e){for(f=e,D(t);l.firstChild;)l.removeChild(l.firstChild);y.length=0;for(var o,n=[],i=[],a=0;a<e.length;a++)o=te("div"),o.className="full-image",o.id="baguette-img-"+a,y.push(o),n.push("baguetteBox-figure-"+a),i.push("baguetteBox-figcaption-"+a),l.appendChild(y[a]);r.setAttribute("aria-labelledby",n.join(" ")),r.setAttribute("aria-describedby",i.join(" "))}}function D(e){e||(e={});for(var t in a)i[t]=a[t],"undefined"!=typeof e[t]&&(i[t]=e[t]);l.style.transition=l.style.webkitTransition="fadeIn"===i.animation?"opacity .4s ease":"slideIn"===i.animation?"":"none","auto"===i.buttons&&("ontouchstart"in window||1===f.length)&&(i.buttons=!1),u.style.display=s.style.display=i.buttons?"":"none";try{r.style.backgroundColor=i.overlayBackgroundColor}catch(n){}}function I(e){i.noScrollbars&&(document.documentElement.style.overflowY="hidden",document.body.style.overflowY="scroll"),"block"!==r.style.display&&(Z(document,"keydown",F),d=e,J(d,function(){K(d),Q(d)}),U(),r.style.display="block",i.fullScreen&&R(),setTimeout(function(){r.className="visible",i.afterShow&&i.afterShow()},50),i.onChange&&i.onChange(d,y.length),b=document.activeElement,j())}function j(){i.buttons?u.focus():c.focus()}function R(){r.requestFullscreen?r.requestFullscreen():r.webkitRequestFullscreen?r.webkitRequestFullscreen():r.mozRequestFullScreen&&r.mozRequestFullScreen()}function Y(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function z(){i.noScrollbars&&(document.documentElement.style.overflowY="auto",document.body.style.overflowY="auto"),"none"!==r.style.display&&($(document,"keydown",F),r.className="",setTimeout(function(){r.style.display="none",Y(),i.afterHide&&i.afterHide()},500),b.focus())}function J(e,t){var n=y[e];if("undefined"!=typeof n){if(n.getElementsByTagName("img")[0])return void(t&&t());var a=f[e].imageElement,o="function"==typeof i.captions?i.captions.call(f,a):a.getAttribute("data-caption")||a.title,r=X(a),l=te("figure"),u=te("img"),s=te("figcaption");l.id="baguetteBox-figure-"+e,s.id="baguetteBox-figcaption-"+e,n.appendChild(l),l.innerHTML='<div class="baguetteBox-spinner"><div class="baguetteBox-double-bounce1"></div><div class="baguetteBox-double-bounce2"></div></div>',u.onload=function(){var n=document.querySelector("#baguette-img-"+e+" .baguetteBox-spinner");l.removeChild(n),!i.async&&t&&t()},u.setAttribute("src",r),i.titleTag&&o&&(u.title=o),l.appendChild(u),i.captions&&o&&(s.innerHTML=o,l.appendChild(s)),i.async&&t&&t()}}function X(e){var t=e.href;if(e.dataset){var n=[];for(var i in e.dataset)"at-"!==i.substring(0,3)||isNaN(i.substring(3))||(n[i.replace("at-","")]=e.dataset[i]);for(var a=Object.keys(n).sort(function(e,t){return parseInt(e,10)<parseInt(t,10)?-1:1}),o=window.innerWidth*window.devicePixelRatio,r=0;r<a.length-1&&a[r]<o;)r++;t=n[a[r]]||t}return t}function _(){var e;return d<=y.length-2?(d++,U(),K(d),e=!0):i.animation&&(l.className="bounce-from-right",setTimeout(function(){l.className=""},400),e=!1),i.onChange&&i.onChange(d,y.length),e}function V(){var e;return d>=1?(d--,U(),Q(d),e=!0):i.animation&&(l.className="bounce-from-left",setTimeout(function(){l.className=""},400),e=!1),i.onChange&&i.onChange(d,y.length),e}function U(){var e=100*-d+"%";"fadeIn"===i.animation?(l.style.opacity=0,setTimeout(function(){o.transforms?l.style.transform=l.style.webkitTransform="translate3d("+e+",0,0)":l.style.left=e,l.style.opacity=1},400)):o.transforms?l.style.transform=l.style.webkitTransform="translate3d("+e+",0,0)":l.style.left=e}function W(){var e=te("div");return"undefined"!=typeof e.style.perspective||"undefined"!=typeof e.style.webkitPerspective}function G(){var e=te("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}function K(e){e-d>=i.preload||J(e+1,function(){K(e+1)})}function Q(e){d-e>=i.preload||J(e-1,function(){Q(e-1)})}function Z(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i):e.attachEvent("on"+t,n)}function $(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent("on"+t,n)}function ee(e){return document.getElementById(e)}function te(e){return document.createElement(e)}function ne(){O(),A(),$(document,"keydown",F),document.getElementsByTagName("body")[0].removeChild(document.getElementById("baguetteBox-overlay")),p={},f=[],d=0}var r,l,u,s,c,v,g,e='<svg width="44" height="60"><polyline points="30 10 10 30 30 50" stroke="rgba(255,255,255,0.5)" stroke-width="4"stroke-linecap="butt" fill="none" stroke-linejoin="round"/></svg>',t='<svg width="44" height="60"><polyline points="14 10 34 30 14 50" stroke="rgba(255,255,255,0.5)" stroke-width="4"stroke-linecap="butt" fill="none" stroke-linejoin="round"/></svg>',n='<svg width="30" height="30"><g stroke="rgb(160,160,160)" stroke-width="4"><line x1="5" y1="5" x2="25" y2="25"/><line x1="5" y1="25" x2="25" y2="5"/></g></svg>',i={},a={captions:!0,fullScreen:!1,noScrollbars:!1,titleTag:!1,buttons:"auto",async:!1,preload:2,animation:"slideIn",afterShow:null,afterHide:null,onChange:null,overlayBackgroundColor:"rgba(0,0,0,.8)"},o={},f=[],d=0,m=!1,h=/.+\.(gif|jpe?g|png|webp)/i,p={},y=[],b=null,w=function(e){-1!==e.target.id.indexOf("baguette-img")&&z()},k=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,V()},T=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,_()},x=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,z()},C=function(e){v=e.changedTouches[0].pageX,g=e.changedTouches[0].pageY},E=function(e){if(!m){e.preventDefault?e.preventDefault():e.returnValue=!1;var t=e.touches[0]||e.changedTouches[0];t.pageX-v>40?(m=!0,V()):t.pageX-v<-40?(m=!0,_()):g-t.pageY>100&&z()}},B=function(){m=!1},N=function(e){"block"!==r.style.display||r.contains(e.target)||(e.stopPropagation(),j())};return[].forEach||(Array.prototype.forEach=function(e,t){for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),[].filter||(Array.prototype.filter=function(e,t,n,i,a){for(n=this,i=[],a=0;a<n.length;a++)e.call(t,n[a],a,n)&&i.push(n[a]);return i}),{run:S,destroy:ne,showNext:_,showPrevious:V}});